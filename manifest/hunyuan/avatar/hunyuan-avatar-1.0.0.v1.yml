api_version: apex/v1
kind: Model
metadata:
  name: Hunyuan Avatar
  version: 1.0.0
  description: Hunyuan Avatar is a 13B parameter model for avatar generation.
  tags:
  - hunyuan
  - avatar
  - 13b
spec:
  engine: hunyuan
  model_type: avatar
  engine_type: torch
  denoise_type: base
  components:
  - type: scheduler
    base: src.scheduler.FlowMatchDiscreteScheduler
    config:
      shift: 5.0
      reverse: true
      solver: euler
  - type: vae
    name: hunyuan/vae
    base: hunyuan
    model_path: hunyuanvideo-community/HunyuanVideo/vae
    config_path: https://huggingface.co/hunyuanvideo-community/HunyuanVideo/resolve/main/vae/config.json
  - type: text_encoder
    base: CLIPTextModel
    model_path: tencent/HunyuanVideo-Avatar/ckpts/text_encoder_2
    tokenizer_name: tencent/HunyuanVideo-Avatar
    tokenizer_class: AutoTokenizer
    tokenizer_kwargs:
      subfolder: ckpts/text_encoder_2
  - type: transformer
    base: hunyuan.avatar
    model_path: https://huggingface.co/tencent/HunyuanVideo-Avatar/resolve/main/ckpts/hunyuan-video-t2v-720p/transformers/mp_rank_00_model_states.pt
    config_path: transformer_configs/hunyuan/hunyuan_avatar.json
    
  - type: helper
    base: hunyuan.llama
    base_model: LlavaForConditionalGeneration
    model_path: tencent/HunyuanVideo-Avatar/ckpts/llava_llama_image
    image_processor_path: tencent/HunyuanVideo-Avatar/ckpts/llava_llama_image
    config_path: https://huggingface.co/tencent/HunyuanVideo-Avatar/resolve/main/ckpts/llava_llama_image/config.json
    tokenizer_class: AutoTokenizer
    tokenizer_name: tencent/HunyuanVideo-Avatar
    tokenizer_kwargs:
      subfolder: ckpts/llava_llama_image
  - type: helper
    base: hunyuan.avatar
    model_path: tencent/HunyuanVideo-Avatar/ckpts/whisper-tiny
    align_pt_path: https://huggingface.co/tencent/HunyuanVideo-Avatar/resolve/main/ckpts/det_align/detface.pt
  defaults:
    run:
      num_inference_steps: 50
      return_latents: false
      text_encoder_kwargs:
        output_type: pooler_output
      attention_kwargs: {}
