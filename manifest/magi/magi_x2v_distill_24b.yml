name: "MAGI 1 X2V 24B"
description: "MAGI 1 X2V 24B is a 24B parameter model for any-to-video generation."
engine: magi
type: x2v

shared: 
  - shared_magi.yml

components:
  - !include shared:magi/text_encoder
  - !include shared:magi/vae

  - type: transformer
    base: "magi.base"
    model_path: sand-ai/MAGI-1/ckpt/magi/24B_distill/inference_weight.distill
    config_path: transformer_configs/magi/magi_24b.json
    tag: "magi_24b"
  
  - type: scheduler
    base: "src.scheduler.magi.MagiScheduler"
    config:
      shift: 3.0
      scheduler_type: "sd3"
      shortcut_mode: "16,16,8"

preprocessors: null

defaults:
  run:
    num_inference_steps: 16
    cfg_number: 1
    distill: true
    return_latents: false
    text_encoder_kwargs:
      max_sequence_length: 800
      pad_to_max_length: true
      use_mask_in_input: true
      pad_with_zero: false
      lower_case: true
    offload: true
    render_on_step: false

save_kwargs:
  safe_serialization: true
  max_shard_size: "5GB"