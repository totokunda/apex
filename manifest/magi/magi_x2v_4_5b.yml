name: "MAGI 1 X2V 4.5B"
description: "MAGI 1 X2V 4.5B is a 4.5B parameter model for any-to-video generation."
engine: magi
type: x2v

shared: 
  - shared_magi.yml

components:
  - !include shared:magi/text_encoder
  - !include shared:magi/vae

  - type: transformer
    base: "magi.base"
    model_path: sand-ai/MAGI-1/ckpt/magi/4.5B_base/inference_weight
    config_path: transformer_configs/magi/magi_4.5b.json
    tag: "magi_4.5b"
  
  - type: scheduler
    base: "src.scheduler.magi.MagiScheduler"
    config:
      shift: 3.0
      scheduler_type: "sd3"
      shortcut_mode: "16,16,8"

preprocessors: null

defaults:
  run:
    num_inference_steps: 64
    return_latents: false
    text_encoder_kwargs:
      max_sequence_length: 800
      pad_to_max_length: true
      use_mask_in_input: true
      pad_with_zero: false

    offload: true
    render_on_step: false

save_kwargs:
  safe_serialization: true
  max_shard_size: "5GB"